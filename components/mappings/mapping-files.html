
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapping Files &#8212; Oasis Data Converter  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Transformer Language" href="transformer-language.html" />
    <link rel="prev" title="Mappings" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="mapping-files">
<h1>Mapping Files<a class="headerlink" href="#mapping-files" title="Permalink to this headline">¶</a></h1>
<p>Mapping files describe how to convert between 2 formats, they are yaml files that
take the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bases</span><span class="p">:</span>
  <span class="o">-</span> <span class="o">...</span>
<span class="n">input_format</span><span class="p">:</span> <span class="o">...</span>
<span class="n">output_format</span><span class="p">:</span> <span class="o">...</span>
<span class="n">forward</span><span class="p">:</span>
  <span class="n">types</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="nb">input</span><span class="o">&gt;</span><span class="p">:</span>
      <span class="nb">type</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="n">string</span><span class="o">&gt;</span>
      <span class="n">nullable</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="o">&gt;</span>
      <span class="n">null_values</span><span class="p">:</span>
        <span class="o">-</span> <span class="o">...</span>
    <span class="o">...</span>
  <span class="n">null_values</span><span class="p">:</span>
    <span class="o">-</span> <span class="o">...</span>
  <span class="n">transform</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="n">target</span><span class="o">&gt;</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">transformation</span><span class="p">:</span> <span class="o">...</span>
        <span class="n">when</span><span class="p">:</span> <span class="o">...</span>
      <span class="o">-</span> <span class="o">...</span>
    <span class="o">...</span>
<span class="n">reverse</span><span class="p">:</span>
  <span class="n">types</span><span class="p">:</span>
    <span class="o">&lt;</span><span class="nb">input</span><span class="o">&gt;</span><span class="p">:</span>
      <span class="nb">type</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="o">|</span><span class="n">string</span><span class="o">&gt;</span>
      <span class="n">nullable</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">true</span><span class="o">|</span><span class="n">false</span><span class="o">&gt;</span>
      <span class="n">null_values</span><span class="p">:</span>
        <span class="o">-</span> <span class="o">...</span>
    <span class="o">...</span>
  <span class="n">null_values</span><span class="p">:</span>
    <span class="o">-</span> <span class="o">...</span>
  <span class="n">transform</span><span class="p">:</span> <span class="o">...</span>
    <span class="o">&lt;</span><span class="n">target</span><span class="o">&gt;</span><span class="p">:</span>
      <span class="o">-</span> <span class="n">transformation</span><span class="p">:</span> <span class="o">...</span>
        <span class="n">when</span><span class="p">:</span> <span class="o">...</span>
      <span class="o">-</span> <span class="o">...</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Each file is designed to allow moving from the input format to the output format
and back again. In the mapping files the concept of ‘forward’ is moving from the
<code class="code docutils literal notranslate"><span class="pre">input_format</span></code> to the <code class="code docutils literal notranslate"><span class="pre">output_format</span></code> and ‘reverse’ is transforming from
the <code class="code docutils literal notranslate"><span class="pre">output_format</span></code> to the <code class="code docutils literal notranslate"><span class="pre">input_format</span></code>.</p>
<p>Each of the fields in the mapping file is described below.</p>
<div class="section" id="bases">
<h2><cite>bases</cite><a class="headerlink" href="#bases" title="Permalink to this headline">¶</a></h2>
<p>This is an optional field that allows for existing mappings to be extended in the
case that there are similarities between the 2 formats.</p>
<p>If it is present each of the bases are merged taking fields from the later files
if present. The merging of each field is described in further detail below.</p>
<p>The value of bases (if present) should be a list of strings that are either names
of existing mappings in the standard mapping library or in one of the provided
mapping directories. If there is any ambiguity in which mapping file to use the
file provided in the last provided mapping directory will be used with custom
mapping paths being used over the standard library.</p>
</div>
<div class="section" id="input-format-output-format">
<h2><cite>input_format</cite>/<cite>output_format</cite><a class="headerlink" href="#input-format-output-format" title="Permalink to this headline">¶</a></h2>
<p>These fields are required if no <code class="code docutils literal notranslate"><span class="pre">bases</span></code> are set or if no bases provide a value.
The input and output format are strings that tell the system which formats are
handled by the conversion.</p>
</div>
<div class="section" id="forward-reverse">
<h2><cite>forward</cite>/<cite>reverse</cite><a class="headerlink" href="#forward-reverse" title="Permalink to this headline">¶</a></h2>
<p>The forward and reverse sections describe how the converter should handle converting
data in both directions. These are optional but should be provided by the bases or
in the mapping file for the converter to have any effect. Each section has a set of
properties:</p>
<ul>
<li><p><strong>null_values</strong>: A list of values to be considered as null when processing input
types. If no type is specified for the input field this will be ignored. If a
<code class="code docutils literal notranslate"><span class="pre">null_types</span></code> is set for a specific field that will be used over this.</p>
<p>If <code class="code docutils literal notranslate"><span class="pre">null_types</span></code> is set on any bases, they are all merged with the ones
specified here.</p>
</li>
<li><p><strong>types</strong>: Describes the types of values for each column in the input data. This
is a mapping of input field name to a set of properties, these are <strong>type</strong> which
should be one of <code class="code docutils literal notranslate"><span class="pre">'int'</span></code>, <code class="code docutils literal notranslate"><span class="pre">'float'</span></code> or <code class="code docutils literal notranslate"><span class="pre">'string'</span></code>, <strong>nullable</strong>
which is a boolean flag that states whether a value should be checked against the
<code class="code docutils literal notranslate"><span class="pre">null_values</span></code> and <strong>null_values</strong> which overrides the <code class="code docutils literal notranslate"><span class="pre">null_values</span></code>
in the parent section.</p>
<p>If <code class="code docutils literal notranslate"><span class="pre">types</span></code> are present in any of the bases they are all merged together
preferring the later parents and this mapping file.</p>
</li>
<li><p><strong>transform</strong>: Mappings that map the output field name to a list of possible
transformations. For each field there is a required <code class="code docutils literal notranslate"><span class="pre">transformation</span></code>
property and an optional <code class="code docutils literal notranslate"><span class="pre">when</span></code> parameter both of which are written in the
<a class="reference internal" href="transformer-language.html#transformerlanguage"><span class="std std-ref">transformer language</span></a>. The <code class="code docutils literal notranslate"><span class="pre">transformation</span></code>
property describes the result of the transformation which will be stored in the
<code class="code docutils literal notranslate"><span class="pre">&lt;target&gt;</span></code> property in the output. If provided the <cite>when</cite> property describes
when the particular transformer should be applied, if it is not provided this is
assumed to be always. If multiple transforms should be applied because all of
their <code class="code docutils literal notranslate"><span class="pre">when</span></code> properties resolve to <code class="code docutils literal notranslate"><span class="pre">True</span></code> then the first transform
that appears for the target will be applied.</p>
<p>If <code class="code docutils literal notranslate"><span class="pre">transform</span></code> are present in any of the bases they are all merged together
preferring the later parents and this mapping file.</p>
<p>To add a default fallback value add a transformation to the end of the transform
list that has a <code class="code docutils literal notranslate"><span class="pre">transformation</span></code> and no <code class="code docutils literal notranslate"><span class="pre">when</span></code> clause. This will
always resolve and only after all other transformations have been skipped due to
their <code class="code docutils literal notranslate"><span class="pre">when</span></code> clause failing.</p>
</li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Oasis Data Converter</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config.html#debugging">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-connections/index.html">Data Connections</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Mappings</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Mapping Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="transformer-language.html">Transformer Language</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../runners/index.html">Runners</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli/index.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../package/index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Mappings</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Mappings</a></li>
      <li>Next: <a href="transformer-language.html" title="next chapter">Transformer Language</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, OasisLMF.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/components/mappings/mapping-files.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>